<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><link href="/navbar/icons/LG_logo.svg" rel="icon"><meta content="width=device-width,initial-scale=1" name="viewport"><meta content="#000000" name="theme-color"><link href="/manifest.json" rel="manifest"><title>Building a Mastermind AI</title><link href="https://fonts.googleapis.com" rel="preconnect"><link href="https://fonts.gstatic.com" rel="preconnect" crossorigin=""><link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Outfit&display=swap" rel="stylesheet"><script defer src="/static/js/main.39e04d65.js"></script><link href="/static/css/main.fbe893e4.css" rel="stylesheet"><link href="https://fonts.googleapis.com" rel="preconnect"><link href="https://www.lachlangibson.dev/blog/mastermind/" rel="canonical" data-react-helmet="true"><meta content="Building a Mastermind AI" data-react-helmet="true" property="og:title"><meta content="article" data-react-helmet="true" property="og:type"><meta content="A functional game of Mastermind with an AI opponent." data-react-helmet="true" property="og:description"><meta content="A functional game of Mastermind with an AI opponent." data-react-helmet="true" name="description"><meta content="en-au" data-react-helmet="true" name="language"><meta content="Lachlan Gibson" data-react-helmet="true" name="author"><meta content="https://www.lachlangibson.dev/" data-react-helmet="true" property="article:author"><meta content="https://www.lachlangibson.dev/" data-react-helmet="true" property="article:publisher"><meta content="https://www.lachlangibson.dev/blog/mastermind/" data-react-helmet="true" property="og:url"><meta content="2024-01-26" data-react-helmet="true" property="article:published_time"><meta content="2024-01-26" data-react-helmet="true" property="article:modified_time"><meta content="summary" data-react-helmet="true" name="twitter:card"><meta content="Building a Mastermind AI" data-react-helmet="true" name="twitter:title"><meta content="A functional game of Mastermind with an AI opponent." data-react-helmet="true" name="twitter:description"><meta content="1200" data-react-helmet="true" property="og:image:width"><meta content="800" data-react-helmet="true" property="og:image:height"><meta content="https://www.lachlangibson.dev/images/blog/thumbnail/webp/mastermind.webp" data-react-helmet="true" property="og:image"><meta content="https://www.lachlangibson.dev/images/blog/thumbnail/webp/mastermind.webp" data-react-helmet="true" name="twitter:image"><link href="https://fonts.gstatic.com" rel="preconnect"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><nav><div><img alt="Logo for Lachlan Gibson's website" src="/navbar/icons/LG_logo.svg" id="navbar-icon"><span id="lachlan-nav-text">lachlangibson.dev</span></div><a class="" href="/">Home</a><a class="" href="/about/">About</a><a class="active-link" href="/blog/" aria-current="page">Portfolio</a></nav><main><div class="flex flex-col items-center"><h1 class="text-4xl tracking-wide my-4 text-center">Building a Mastermind AI</h1><div class="flex gap-4 items-center mb-4"><div class="w-12 h-12 aspect-square bg-slate-200 overflow-hidden rounded-full relative"><img alt="Lachlan Gibson" src="/images/home/lachlan_gibson_200.webp" class="h-full"></div><div class="h-fit"><div class="tracking-wide text-xl">Lachlan Gibson</div><div class="text-sky-600 text-xs"><time datetime="2024-01-26">Work in progress</time></div></div><div class="relative"><button class="flex items-center whitespace-nowrap rounded bg-slate-700 p-3 text-xs font-medium uppercase leading-normal text-white transition duration-150 ease-in-out hover:bg-slate-600 focus:bg-primary-600 active:bg-slate-500 motion-reduce:transition-none" type="button" aria-expanded="false" id="dropdownMenuButton1"><svg class="h-4" fill="currentColor" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M307 34.8c-11.5 5.1-19 16.6-19 29.2v64H176C78.8 128 0 206.8 0 304C0 417.3 81.5 467.9 100.2 478.1c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-7.5-4.3-14.4-9.8-19.5C108.8 431.9 96 414.4 96 384c0-53 43-96 96-96h96v64c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4z"></path></svg></button></div></div></div><p>This is a work in progress.</p><div class="bg-slate-600 rounded max-w-sm mx-auto flex flex-col justify-center"><div class="grid grid-flow-col gap-4 mt-4 p-3 rounded bg-slate-500 mx-4"><div class="rounded-full aspect-square" style="background:radial-gradient(circle at 30% 30%,#ff5454,#e62c2c,#be0404);box-shadow:rgba(0,0,0,.4) .4rem .4rem .5rem"></div><div class="rounded-full aspect-square" style="background:radial-gradient(circle at 30% 30%,#87ff64,#5fde3c,#37b614);box-shadow:rgba(0,0,0,.4) .4rem .4rem .5rem"></div><div class="rounded-full aspect-square" style="background:radial-gradient(circle at 30% 30%,#6764ff,#3f3cde,#1714b6);box-shadow:rgba(0,0,0,.4) .4rem .4rem .5rem"></div><div class="rounded-full aspect-square" style="background:radial-gradient(circle at 30% 30%,#ffff64,#dedb3c,#b6b314);box-shadow:rgba(0,0,0,.4) .4rem .4rem .5rem"></div><div class="rounded-full aspect-square" style="background:radial-gradient(circle at 30% 30%,#ff64ee,#de3cc6,#b6149e);box-shadow:rgba(0,0,0,.4) .4rem .4rem .5rem"></div><div class="rounded-full aspect-square" style="background:radial-gradient(circle at 30% 30%,#ff8b49,#de6321,#b63b00);box-shadow:rgba(0,0,0,.4) .4rem .4rem .5rem"></div></div><div class="w-full grid grid-cols-[3rem,1fr] gap-4 p-4"><div class="border-t pt-3 col-span-2 text-center">Guess 1/12</div><button class="text-white font-medium rounded-lg w-10 h-10 m-auto text-2xl border border-slate-700 bg-gray-500 hover:bg-gray-700 active:bg-gray-600" type="button" aria-label="Submit guess"><svg class="h-6 m-auto" fill="currentColor" viewBox="0 0 320 512" xmlns="http://www.w3.org/2000/svg"><path d="M143 256.3L7 120.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0L313 86.3c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.4 9.5-24.6 9.5-34 .1zm34 192l136-136c9.4-9.4 9.4-24.6 0-33.9l-22.6-22.6c-9.4-9.4-24.6-9.4-33.9 0L160 352.1l-96.4-96.4c-9.4-9.4-24.6-9.4-33.9 0L7 278.3c-9.4 9.4-9.4 24.6 0 33.9l136 136c9.4 9.5 24.6 9.5 34 .1z"></path></svg></button><div class="inputRow w-full grid grid-flow-col gap-4"><div class="rounded-full aspect-square bg-black" style="margin:25%"></div><div class="rounded-full aspect-square bg-black" style="margin:25%"></div><div class="rounded-full aspect-square bg-black" style="margin:25%"></div><div class="rounded-full aspect-square bg-black" style="margin:25%"></div></div><div class="border-b h-3 col-span-2"></div></div><button class="text-white font-medium rounded-lg w-10 h-10 m-auto mb-2 text-2xl border border-slate-700 bg-gray-500 hover:bg-gray-700 active:bg-gray-600" type="button" aria-label="Reset game"><svg class="h-6 m-auto" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" version="1.1"><path d="M936.571429 603.428571q0 2.857143-0.571429 4-36.571429 153.142857-153.142857 248.285715T509.714286 950.857143q-83.428571 0-161.428572-31.428572T209.142857 829.714286l-73.714286 73.714285q-10.857143 10.857143-25.714285 10.857143t-25.714286-10.857143-10.857143-25.714285v-256q0-14.857143 10.857143-25.714286t25.714286-10.857143h256q14.857143 0 25.714285 10.857143t10.857143 25.714286-10.857143 25.714285l-78.285714 78.285715q40.571429 37.714286 92 58.285714t106.857143 20.571429q76.571429 0 142.857143-37.142858t106.285714-102.285714q6.285714-9.714286 30.285714-66.857143 4.571429-13.142857 17.142858-13.142857h109.714285q7.428571 0 12.857143 5.428572t5.428572 12.857142z m14.285714-457.142857v256q0 14.857143-10.857143 25.714286t-25.714286 10.857143h-256q-14.857143 0-25.714285-10.857143t-10.857143-25.714286 10.857143-25.714285l78.857142-78.857143Q626.857143 219.428571 512 219.428571q-76.571429 0-142.857143 37.142858T262.857143 358.857143q-6.285714 9.714286-30.285714 66.857143-4.571429 13.142857-17.142858 13.142857H101.714286q-7.428571 0-12.857143-5.428572T83.428571 420.571429v-4q37.142857-153.142857 154.285715-248.285715T512 73.142857q83.428571 0 162.285714 31.714286T814.285714 194.285714l74.285715-73.714285q10.857143-10.857143 25.714285-10.857143t25.714286 10.857143 10.857143 25.714285z"></path></svg></button><button class="text-white font-medium rounded-lg w-10 h-10 m-auto mb-2 text-2xl border border-slate-700 bg-gray-500 hover:bg-gray-700 active:bg-gray-600" type="button" aria-label="Hint">?</button><label><span>Guesses:</span><input class="w-10 text-black" max="12" min="6" type="number" value="12"></label><label><span>Code size:</span><input class="w-10 text-black" max="6" min="3" type="number" value="4"></label><label><span>Colours:</span><input class="w-10 text-black" max="8" min="4" type="number" value="6"></label><p>Remaining options: 360</p></div><p>NOTES</p><p>If the code size is <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal" style="margin-right:.03148em">k</span></span></span></span></span>, then the set of possible keys is</p><div data-testid="react-katex"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="script">K</mi><mo>=</mo><mo stretchy="false">{</mo><mo stretchy="false">(</mo><msub><mi>k</mi><mi>r</mi></msub><mo separator="true">,</mo><msub><mi>k</mi><mi>w</mi></msub><mo stretchy="false">)</mo><mo>∈</mo><msubsup><mi mathvariant="double-struck">Z</mi><mrow><mo>⩾</mo><mn>0</mn></mrow><mn>2</mn></msubsup><mtext> </mtext><mi mathvariant="normal">∣</mi><mtext> </mtext><msub><mi>k</mi><mi>r</mi></msub><mo>+</mo><msub><mi>k</mi><mi>w</mi></msub><mo>⩽</mo><mi>K</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\mathcal{K}=\{(k_r,k_w)\in\Z_{\geqslant 0}^2 ~|~ k_r + k_w \leqslant K\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathcal" style="margin-right:.01445em">K</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">{(</span><span class="mord"><span class="mord mathnormal" style="margin-right:.03148em">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:-.0315em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.02778em">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.03148em">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:-.0315em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.02691em">w</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1.2068em;vertical-align:-.3427em"></span><span class="mord"><span class="mord mathbb">Z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8641em"><span style="top:-2.453em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel amsrm mtight">⩾</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.3427em"><span></span></span></span></span></span></span><span class="mspace nobreak"> </span><span class="mord">∣</span><span class="mspace nobreak"> </span><span class="mord"><span class="mord mathnormal" style="margin-right:.03148em">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:-.0315em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.02778em">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.8444em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.03148em">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:-.0315em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.02691em">w</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel amsrm">⩽</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.07153em">K</span><span class="mclose">}</span></span></span></span></span></div><p>The total number of unique keys is then</p><div data-testid="react-katex"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">∣</mi><mi mathvariant="script">K</mi><mi mathvariant="normal">∣</mi><mo>=</mo><mfrac><mrow><mo stretchy="false">(</mo><mi>K</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi>K</mi><mo>+</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">|\mathcal{K}| = \frac{(K+1)(K+2)}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">∣</span><span class="mord mathcal" style="margin-right:.01445em">K</span><span class="mord">∣</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:2.113em;vertical-align:-.686em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:.07153em">K</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span><span class="mord">1</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:.07153em">K</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div><p>For any given guess from the set of valid guesses, <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">G</mi></mrow><annotation encoding="application/x-tex">\mathcal{G}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7805em;vertical-align:-.0972em"></span><span class="mord mathcal" style="margin-right:.0593em">G</span></span></span></span></span>, we can partition the set of possible codes, <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">P</mi><mo>⊆</mo><mi mathvariant="script">G</mi></mrow><annotation encoding="application/x-tex">\mathcal{P}\subseteq\mathcal{G}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8193em;vertical-align:-.136em"></span><span class="mord mathcal" style="margin-right:.08222em">P</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.7805em;vertical-align:-.0972em"></span><span class="mord mathcal" style="margin-right:.0593em">G</span></span></span></span></span>, into upto <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><mi mathvariant="script">K</mi><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">|\mathcal{K}|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">∣</span><span class="mord mathcal" style="margin-right:.01445em">K</span><span class="mord">∣</span></span></span></span></span> nonempty mutually disjoint subsets, <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="script">T</mi><mi>k</mi></msub><mo stretchy="false">(</mo><mi mathvariant="script">P</mi><mo separator="true">,</mo><mi>g</mi><mo stretchy="false">)</mo><mo>⊆</mo><mi mathvariant="script">P</mi></mrow><annotation encoding="application/x-tex">\mathcal{T}_k(\mathcal{P},g)\subseteq\mathcal{P}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathcal" style="margin-right:.25417em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3361em"><span style="top:-2.55em;margin-left:-.2542em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathcal" style="margin-right:.08222em">P</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal" style="margin-right:.03588em">g</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">⊆</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathcal" style="margin-right:.08222em">P</span></span></span></span></span>, where <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>∈</mo><mi mathvariant="script">K</mi></mrow><annotation encoding="application/x-tex">k\in\mathcal{K}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7335em;vertical-align:-.0391em"></span><span class="mord mathnormal" style="margin-right:.03148em">k</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathcal" style="margin-right:.01445em">K</span></span></span></span></span>. This gives us the framework to consider some myopic strategies by using greedy algorithms, which optimise the current turn without considering future turns.<br><br>The first greedy algorthm would be to choose the guess that minimizes the maximum number of possible codes after the result is known, thereby mitigating the worst case scenario of the next turn.</p><div data-testid="react-katex"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munder><mrow><mi mathvariant="normal">arg min</mi><mo>⁡</mo></mrow><mrow><mi>g</mi><mo>∈</mo><mi mathvariant="script">G</mi></mrow></munder><munder><mrow><mi>max</mi><mo>⁡</mo></mrow><mrow><mi>k</mi><mo>∈</mo><mi mathvariant="script">K</mi></mrow></munder><mi mathvariant="normal">∣</mi><mi mathvariant="script">T</mi><mo stretchy="false">(</mo><mi mathvariant="script">P</mi><mo separator="true">,</mo><mi>g</mi><mo separator="true">,</mo><mi>k</mi><mo stretchy="false">)</mo><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">\argmin_{g\in\mathcal{G}}\max_{k\in\mathcal{K}}|\mathcal{T}(\mathcal{P},g,k)|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.8249em;vertical-align:-1.0749em"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.6679em"><span style="top:-2.1612em;margin-left:0"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.03588em">g</span><span class="mrel mtight">∈</span><span class="mord mathcal mtight" style="margin-right:.0593em">G</span></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span><span class="mop"><span class="mord mathrm" style="margin-right:.01389em">arg</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathrm">min</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.0749em"><span></span></span></span></span></span><span class="mspace" style="margin-right:.1667em"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.4306em"><span style="top:-2.3479em;margin-left:0"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.03148em">k</span><span class="mrel mtight">∈</span><span class="mord mathcal mtight" style="margin-right:.01445em">K</span></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span><span class="mop">max</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.7795em"><span></span></span></span></span></span><span class="mspace" style="margin-right:.1667em"></span><span class="mord">∣</span><span class="mord mathcal" style="margin-right:.25417em">T</span><span class="mopen">(</span><span class="mord mathcal" style="margin-right:.08222em">P</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal" style="margin-right:.03588em">g</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal" style="margin-right:.03148em">k</span><span class="mclose">)</span><span class="mord">∣</span></span></span></span></span></div><p>Another greedy algorithm would be to choose the guess that minimises the expected number of possible codes after the key is known. This could result in a better average performance over multiple games. If all codes are equally likely then the probability of each key is the size of the corresponding subset divided by the total number of possible codes.</p><div data-testid="react-katex"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munder><mrow><mi mathvariant="normal">arg min</mi><mo>⁡</mo></mrow><mrow><mi>g</mi><mo>∈</mo><mi mathvariant="script">G</mi></mrow></munder><mfrac><mn>1</mn><mrow><mi mathvariant="normal">∣</mi><mi mathvariant="script">P</mi><mi mathvariant="normal">∣</mi></mrow></mfrac><munder><mo>∑</mo><mrow><mi>k</mi><mo>∈</mo><mi mathvariant="script">K</mi></mrow></munder><mi mathvariant="normal">∣</mi><mi mathvariant="script">T</mi><mo stretchy="false">(</mo><mi mathvariant="script">P</mi><mo separator="true">,</mo><mi>g</mi><mo separator="true">,</mo><mi>k</mi><mo stretchy="false">)</mo><msup><mi mathvariant="normal">∣</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\argmin_{g\in\mathcal{G}}\frac{1}{|\mathcal{P}|}\sum_{k\in\mathcal{K}}|\mathcal{T}(\mathcal{P},g,k)|^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.6509em;vertical-align:-1.3295em"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.6679em"><span style="top:-2.1612em;margin-left:0"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.03588em">g</span><span class="mrel mtight">∈</span><span class="mord mathcal mtight" style="margin-right:.0593em">G</span></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span><span class="mop"><span class="mord mathrm" style="margin-right:.01389em">arg</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathrm">min</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.0749em"><span></span></span></span></span></span><span class="mspace" style="margin-right:.1667em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">∣</span><span class="mord mathcal" style="margin-right:.08222em">P</span><span class="mord">∣</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.936em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.1667em"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em"><span style="top:-1.8479em;margin-left:0"><span class="pstrut" style="height:3.05em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.03148em">k</span><span class="mrel mtight">∈</span><span class="mord mathcal mtight" style="margin-right:.01445em">K</span></span></span></span><span style="top:-3.05em"><span class="pstrut" style="height:3.05em"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3295em"><span></span></span></span></span></span><span class="mspace" style="margin-right:.1667em"></span><span class="mord">∣</span><span class="mord mathcal" style="margin-right:.25417em">T</span><span class="mopen">(</span><span class="mord mathcal" style="margin-right:.08222em">P</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal" style="margin-right:.03588em">g</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal" style="margin-right:.03148em">k</span><span class="mclose">)</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8641em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></div><p>In practice the factor of <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><mi mathvariant="script">P</mi><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">|\mathcal{P}|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">∣</span><span class="mord mathcal" style="margin-right:.08222em">P</span><span class="mord">∣</span></span></span></span></span> can be omitted as it is constant for all guesses.<br><br>In many cases it can happen that multiple guesses are equally optimal according to these greedy metrics. Ties can be broken arbitrarily by choosing the first, last or a random guess from the set of equally greedily optimal guesses. Possibly a better approach would be to use another greedy metric to break the tie. This is lexicographic optimisation. In fact, these two greedy metrics are from the same class. Consider the metric which minimises the expected size of the next partition raised to the power of <span data-testid="react-katex"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi></mrow><annotation encoding="application/x-tex">l</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal" style="margin-right:.01968em">l</span></span></span></span></span>.</p><div data-testid="react-katex"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msubsup><mi>T</mi><mi>l</mi><mo>∗</mo></msubsup><mo>=</mo><munder><mrow><mi>min</mi><mo>⁡</mo></mrow><mrow><mi>g</mi><mo>∈</mo><mi mathvariant="script">G</mi></mrow></munder><munder><mo>∑</mo><mrow><mi>k</mi><mo>∈</mo><mi mathvariant="script">K</mi></mrow></munder><mi mathvariant="normal">∣</mi><mi mathvariant="script">T</mi><mo stretchy="false">(</mo><mi mathvariant="script">P</mi><mo separator="true">,</mo><mi>g</mi><mo separator="true">,</mo><mi>k</mi><mo stretchy="false">)</mo><msup><mi mathvariant="normal">∣</mi><mrow><mi>l</mi><mo>+</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">T_l^*=\min_{g\in\mathcal{G}}\sum_{k\in\mathcal{K}}|\mathcal{T}(\mathcal{P},g,k)|^{l+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9857em;vertical-align:-.247em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.7387em"><span style="top:-2.453em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.01968em">l</span></span></span><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.247em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:2.3795em;vertical-align:-1.3295em"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.6679em"><span style="top:-2.3557em;margin-left:0"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.03588em">g</span><span class="mrel mtight">∈</span><span class="mord mathcal mtight" style="margin-right:.0593em">G</span></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span><span class="mop">min</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.8804em"><span></span></span></span></span></span><span class="mspace" style="margin-right:.1667em"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em"><span style="top:-1.8479em;margin-left:0"><span class="pstrut" style="height:3.05em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.03148em">k</span><span class="mrel mtight">∈</span><span class="mord mathcal mtight" style="margin-right:.01445em">K</span></span></span></span><span style="top:-3.05em"><span class="pstrut" style="height:3.05em"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3295em"><span></span></span></span></span></span><span class="mspace" style="margin-right:.1667em"></span><span class="mord">∣</span><span class="mord mathcal" style="margin-right:.25417em">T</span><span class="mopen">(</span><span class="mord mathcal" style="margin-right:.08222em">P</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal" style="margin-right:.03588em">g</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal" style="margin-right:.03148em">k</span><span class="mclose">)</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8991em"><span style="top:-3.113em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.01968em">l</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span></div></main><footer class="p-4"><div class="flex items-center justify-between"><span class="text-sm text-gray-400">© 2024 Lachlan Gibson</span><div class="m-4 h-4 flex w-20 justify-between"><a class="text-gray-500 hover:text-white p-0 m-0" href="https://www.linkedin.com/in/lachlan-james-gibson/" aria-label="Visit Lachlan's LinkedIn profile" rel="noopener noreferrer" target="_blank"><svg class="h-full" fill="currentColor" viewBox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a><a class="text-gray-500 hover:text-white p-0 m-0" href="https://github.com/LachlanGibson" aria-label="Visit Lachlan's GitHub profile" rel="noopener noreferrer" target="_blank"><svg class="h-full" fill="currentColor" viewBox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a class="text-gray-500 hover:text-white p-0 m-0" href="https://scholar.google.com/citations?user=NeEMSU0AAAAJ&hl=en" aria-label="Visit Lachlan's Google Scholar profile" rel="noopener noreferrer" target="_blank"><svg class="h-full" fill="currentColor" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M390.9 298.5c0 0 0 .1 .1 .1c9.2 19.4 14.4 41.1 14.4 64C405.3 445.1 338.5 512 256 512s-149.3-66.9-149.3-149.3c0-22.9 5.2-44.6 14.4-64h0c1.7-3.6 3.6-7.2 5.6-10.7c4.4-7.6 9.4-14.7 15-21.3c27.4-32.6 68.5-53.3 114.4-53.3c33.6 0 64.6 11.1 89.6 29.9c9.1 6.9 17.4 14.7 24.8 23.5c5.6 6.6 10.6 13.8 15 21.3c2 3.4 3.8 7 5.5 10.5zm26.4-18.8c-30.1-58.4-91-98.4-161.3-98.4s-131.2 40-161.3 98.4L0 202.7 256 0 512 202.7l-94.7 77.1z"></path></svg></a></div></div></footer></div></body></html>